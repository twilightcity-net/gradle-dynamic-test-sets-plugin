plugins {
    id "groovy"
    id "java-gradle-plugin"
    id "idea"
    id 'maven-publish'
    id "com.gradle.plugin-publish" version "0.16.0"
}

repositories {
    mavenCentral()
    gradlePluginPortal()
}

dependencies {
    api "org.unbroken-dome.gradle-plugins:gradle-testsets-plugin:4.0.0"

    testImplementation "org.spockframework:spock-core:1.3-groovy-2.5"
}

String pluginDescription = "Opinionated, convention over configuration test plugin.  Using https://github.com/unbroken-dome/gradle-testsets-plugin " +
        "for the heavy lifting, this plugin inspects the source trees of a project and automatically configures " +
        "gradle-testsets-plugin based on directory naming conventions."

pluginBundle {
    website = "https://github.com/betterdevxp/gradle-dynamic-test-sets-plugin"
    vcsUrl = "https://github.com/betterdevxp/gradle-dynamic-test-sets-plugin.git"
    tags = ["gradle", "testing", "testsets", "test sets", "component test", "integration test", "functional test"]
    description = pluginDescription
}

gradlePlugin {
    plugins {
        dynamicTestSets {
            id = "org.betterdevxp.dynamic-test-sets"
            displayName = "Dynamic TestSets"
            description = pluginDescription
            implementationClass = "org.betterdevxp.gradle.test.DynamicTestSetsPlugin"
        }
    }
}
